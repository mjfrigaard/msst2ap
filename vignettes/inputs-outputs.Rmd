---
title: "Inputs and outputs"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Inputs and outputs}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r}
#| label: setup
#| include: false
#| eval: true
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 5,
  fig.height = 3.5,
  dpi = 140,
  fig.retina = TRUE
)
```

```{r}
#| label: pkgs
#| message: false
#| warning: false
library(msst2ap)
```

## Package datasets

I've added some additional unit tests for the utility functions in the `gghistApp()`

## `pkg_inst_check()`

`pkg_inst_check` will check if a package is installed, and if not, install it.

```{r}
#| eval: true 
#| echo: true
# with single pkg
pkg_inst_check("emoji")
```

```{r}
#| error: true 
find.package(package = "emoji", 
  lib.loc = .libPaths(), 
  quiet = FALSE,
  verbose = getOption("verbose"))
```


```{r}
#| eval: true 
#| echo: true
pkgs <- c("palmerpenguins", "snakecase")
pkg_inst_check(pkgs)
```

## `find_pkg_df_nms()`

The `find_pkg_df_nms()` function will return a named vector of `data.frame`s/`tibble`s in a package.

It works with base packages: 

```{r}
#| eval: true 
#| echo: true 
#| message: false 
#| warning: false
find_pkg_df_nms(pkg = "datasets")
```

And add-on packages:

```{r}
#| eval: true 
#| echo: true 
#| message: false 
#| warning: false
pkg_inst_check("forcats")
find_pkg_df_nms(pkg = "forcats")
```

If there are no `data.frame`s/`tibble`s, it returns nothing.

```{r}
#| eval: true 
#| echo: true 
#| message: false 
#| warning: false
find_pkg_df_nms(pkg = "utils")
find_pkg_df_nms(pkg = "stats")
```

## `pkg_df_check()` 

`pkg_df_check()` is a helper function that returns a `TRUE`/`FALSE` if the package contains at least one `data.frame`/`tibble`: 

```{r}
#| eval: true 
#| echo: true 
#| message: false 
#| warning: false
pkg_df_check("datasets")
pkg_df_check("stringr")
```

## `find_df_pkgs()` 

`find_df_pkgs()` is the real workhorse of the `msst2ap` package--it returns the installed packages with `data.frame`s/`tibble`s: 

```{r}
#| eval: true 
#| echo: true 
#| message: false 
#| warning: false
find_df_pkgs()
```

## `get_pkg_df()` 

`get_pkg_df()` is similar to `get()`, but has a slightly more intuitive API (i.e., only needs the `pkg` and `df`)

```{r}
#| eval: true 
#| echo: true 
#| message: false 
#| warning: false
get_pkg_df(df = "starwars", pkg = "dplyr")
```


